{"version":3,"sources":["../src/utils.js"],"names":[],"mappings":"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","file":"utils.js","sourcesContent":["import {app} from './app';\n\nexport function dashCase(str) {\n\treturn str.replace(/([A-Z])/g, function ($1) {\n\t\treturn \"-\" + $1.toLowerCase();\n\t});\n}\n\nexport function funcName(func) {\n\treturn funcMeta(func).name;\n}\n\nexport function superClass(func) {\n\treturn funcMeta(func).superClass;\n}\n\n/**\n@function Metadata\n@param {Function} func\n@returns {Object} The function metadata.\n*/\nexport function funcMeta(func) {\n\tif (!func) {\n\t\treturn null;\n\t}\n\n\tif (func.$meta !== undefined) {\n\t\tif (testEqualConstructor(func.$meta.top)) {\n\t\t\treturn func.$meta;\n\t\t}\n\t\tif (testEqualConstructor(func.$meta.base)) {\n\t\t\treturn func.$meta;\n\t\t}\n\t\tif (func.$meta.wrappers.findIndex(testEqualConstructor) >= 0) {\n\t\t\treturn func.$meta;\n\t\t}\n\t}\n\n\tlet meta = {\n\t\tcontroller: null,\n\t\tservice:    null,\n\t\tstate:      null,\n\t\twrappers:   null,\n\t\tbase:       func,\n\t\ttop:        func,\n\t\tname:       getName(),\n\t\tsuperClass: getSuperClass(),\n\t\twrap:       wrapFunc,\n\t};\n\n\tfunc.$meta = meta;\n\n\treturn meta;\n\n\tfunction testEqualConstructor(other) {\n\t\treturn ((func === other) || (func.prototype && func.prototype.constructor === other));\n\t}\n\n\tfunction getName() {\n\t\tlet name = ((func && func.name) || null);\n\t\tif (name === null) {\n\t\t\tname = func.toString().match(/^function\\s*([^\\s(]+)/)[1];\n\t\t}\n\t\treturn name;\n\t}\n\n\tfunction getSuperClass() {\n\t\tif (!func) { return null; }\n\t\tif (!func.prototype) { return null; }\n\t\tif (!Object.getPrototypeOf(func.prototype)) { return null; }\n\t\tlet s = Object.getPrototypeOf(func.prototype).constructor || null;\n\t\tif (s === Object) { s = null; }\n\t\treturn s;\n\t}\n}\n\nexport function wrapFunc(wrapperFunc) {\n\tlet func = this.top;\n\n\tthis.top = wrapperFunc;\n\tif (!this.wrappers) {\n\t\tthis.wrappers = [wrapperFunc];\n\t} else {\n\t\tthis.wrappers.unshift(wrapperFunc);\n\t}\n\n\twrapperFunc.$meta = this;\n\twrapperFunc.prototype = func.prototype;\n\n\t// inherit $inject\n\tif (func.$inject) {\n\t\twrapperFunc.$inject = func.$inject.slice();\n\t}\n\n\tif (this.controller) {\n\t\t// re-register controller\n\t\tapp.controller(this.controller.name, this.top);\n\t}\n\n\tif (this.service) {\n\t\t// re-register service\n\t\tapp.service(this.service.name, this.top);\n\t}\n\n\treturn wrapperFunc;\n}\n"]}