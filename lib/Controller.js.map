{"version":3,"sources":["../src/Controller.js"],"names":[],"mappings":";;;;;QAGgB,UAAU,GAAV,UAAU;;qBAHH,SAAS;;mBACd,OAAO;;AAElB,SAAS,UAAU,CAAC,IAAI,EAAE,OAAO,EAAE;AACxC,MAAI,OAAO,IAAI,KAAK,UAAU,EAAE;AAC9B,QAAI,YAAW,GAAG,IAAI,CAAC,AAAC,IAAI,GAAG,IAAI,CAAC;AACpC,WAAO,QAAQ,CAAC,YAAW,EAAE,OAAO,CAAC,CAAC;GACvC;;AAED,SAAO,QAAQ,CAAC;AAChB,WAAS,QAAQ,CAAC,WAAW,EAAE,IAAI,EAAC;AAClC,QAAI,IAAI,GAAG,YAAY,CAAC,WAAW,CAAC,CAAC;;AAErC,QAAI,SAAS,GAAG,WAbZ,QAAQ,EAaa,WAAW,CAAC,CAAC;AACtC,QAAI,GAAI,IAAI,IAAI,EAAE,AAAC,CAAC;AACpB,QAAI,GAAI,IAAI,IAAI,IAAI,CAAC,IAAI,IAAI,SAAS,AAAC,CAAC;;AAExC,QAAI,CAAC,IAAI,GAAG,IAAI,CAAC;AACjB,SAjBI,GAAG,CAiBH,UAAU,CAAC,IAAI,EAAE,WAAW,CAAC,CAAC;GACnC;CACF;;AAED,SAAS,YAAY,CAAC,WAAW,EAAE;AACjC,MAAI,IAAI,GAAG,WAAW,CAAC,YAAY,CAAC;;AAEpC,MAAI,IAAI,IAAK,IAAI,CAAC,WAAW,KAAK,WAAW,AAAC,EAAE;AAC9C,UAAM,sCAAsC,CAAC;GAC9C;;AAED,aAAW,CAAC,YAAY,GAAG,EAAE,WAAW,EAAX,WAAW,EAAE,CAAC;AAC3C,SAAO,WAAW,CAAC,YAAY,CAAC;CACjC","file":"Controller.js","sourcesContent":["import {funcName} from \"./utils\";\nimport {app} from \"./app\";\n\nexport function Controller(name, options) {\n  if (typeof name === \"function\") {\n    let constructor = name; name = null;\n    return register(constructor, options);\n  }\n\n  return register;\n  function register(constructor, opts){\n    let meta = registerLock(constructor);\n\n    let className = funcName(constructor);\n    opts = (opts || {});\n    name = (name || opts.name || className);\n\n    meta.name = name;\n    app.controller(name, constructor);\n  }\n}\n\nfunction registerLock(constructor) {\n  var lock = constructor.$$controller;\n\n  if (lock && (lock.constructor === constructor)) {\n    throw \"@Controller() can only be used once!\";\n  }\n\n  constructor.$$controller = { constructor };\n  return constructor.$$controller;\n}\n"]}