{"version":3,"sources":["../src/Service.js"],"names":[],"mappings":";;;;;QAGgB,OAAO,GAAP,OAAO;;qBAHA,SAAS;;mBACd,OAAO;;AAElB,SAAS,OAAO,CAAC,IAAI,EAAE;AAC7B,KAAI,OAAO,IAAI,KAAK,UAAU,EAAE;AAC/B,MAAI,YAAW,GAAG,IAAI,CAAC,AAAC,IAAI,GAAG,IAAI,CAAC;AACpC,SAAO,QAAQ,CAAC,YAAW,CAAC,CAAC;EAC7B;AACD,QAAO,QAAQ,CAAC;;AAEhB,UAAS,QAAQ,CAAC,WAAW,EAAC;AAC7B,cAAY,CAAC,WAAW,CAAC,CAAC;AAC1B,MAAI,IAAI,GAAG,WAZL,QAAQ,EAYM,WAAW,CAAC,CAAC;;AAEjC,MAAI,GAAI,IAAI,IAAI,IAAI,CAAC,IAAI,AAAC,CAAC;AAC3B,MAAI,CAAC,OAAO,CAAC,IAAI,GAAG,IAAI,CAAC;;AAEzB,OAhBM,GAAG,CAgBL,OAAO,CAAC,IAAI,EAAE,WAAW,CAAC,CAAC;EAC/B;CACD;;AAED,SAAS,YAAY,CAAC,WAAW,EAAE;AAClC,KAAI,IAAI,GAAG,WAtBJ,QAAQ,EAsBK,WAAW,CAAC,CAAC;AACjC,KAAI,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC;;AAExB,KAAI,IAAI,EAAE;AACT,QAAM,mCAAmC,CAAC;EAC1C;;AAED,KAAI,CAAC,OAAO,GAAG,EAAE,CAAC;CAClB","file":"Service.js","sourcesContent":["import {funcMeta} from \"./utils\";\nimport {app} from \"./app\";\n\nexport function Service(name) {\n\tif (typeof name === \"function\") {\n\t\tlet constructor = name; name = null;\n\t\treturn register(constructor);\n\t}\n\treturn register;\n\n\tfunction register(constructor){\n\t\tregisterLock(constructor);\n\t\tlet meta = funcMeta(constructor);\n\n\t\tname = (name || meta.name);\n\t\tmeta.service.name = name;\n\n\t\tapp.service(name, constructor);\n\t}\n}\n\nfunction registerLock(constructor) {\n\tlet meta = funcMeta(constructor);\n\tvar lock = meta.service;\n\n\tif (lock) {\n\t\tthrow \"@Service() can only be used once!\";\n\t}\n\n\tmeta.service = {};\n}\n"]}